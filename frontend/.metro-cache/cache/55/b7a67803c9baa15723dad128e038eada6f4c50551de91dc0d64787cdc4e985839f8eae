{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":46,"index":125}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":40,"index":166}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SocketContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"SocketProvider\", {\n    enumerable: true,\n    get: function () {\n      return SocketProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useSocket\", {\n    enumerable: true,\n    get: function () {\n      return useSocket;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _socketIoClient = require(_dependencyMap[2], \"socket.io-client\");\n  var _AuthContext = require(_dependencyMap[3], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  const SocketContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const SocketProvider = ({\n    children\n  }) => {\n    _s();\n    const [socket, setSocket] = (0, _react.useState)(null);\n    const [connected, setConnected] = (0, _react.useState)(false);\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    (0, _react.useEffect)(() => {\n      if (user) {\n        const newSocket = (0, _socketIoClient.io)(API_URL, {\n          transports: ['websocket', 'polling'],\n          reconnection: true,\n          reconnectionAttempts: 5,\n          reconnectionDelay: 1000\n        });\n        newSocket.on('connect', () => {\n          console.log('Socket connected');\n          setConnected(true);\n          newSocket.emit('join_room', {\n            user_id: user.user_id\n          });\n        });\n        newSocket.on('disconnect', () => {\n          console.log('Socket disconnected');\n          setConnected(false);\n        });\n        setSocket(newSocket);\n        return () => {\n          newSocket.close();\n        };\n      }\n    }, [user]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SocketContext.Provider, {\n      value: {\n        socket,\n        connected\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }, this);\n  };\n  _s(SocketProvider, \"OKPP+mnOeJfwAAivly0/xMlqf4U=\", false, function () {\n    return [_AuthContext.useAuth];\n  });\n  _c = SocketProvider;\n  const useSocket = () => {\n    _s2();\n    const context = (0, _react.useContext)(SocketContext);\n    if (!context) {\n      throw new Error('useSocket must be used within SocketProvider');\n    }\n    return context;\n  };\n  _s2(useSocket, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"SocketProvider\");\n});","lineCount":90,"map":[[10,2,14,0,"Object"],[10,8,14,0],[10,9,14,0,"defineProperty"],[10,23,14,0],[10,24,14,0,"exports"],[10,31,14,0],[11,4,14,0,"enumerable"],[11,14,14,0],[12,4,14,0,"get"],[12,7,14,0],[12,18,14,0,"get"],[12,19,14,0],[13,6,14,0],[13,13,14,0,"SocketProvider"],[13,27,14,0],[14,4,14,0],[15,2,14,0],[16,2,54,0,"Object"],[16,8,54,0],[16,9,54,0,"defineProperty"],[16,23,54,0],[16,24,54,0,"exports"],[16,31,54,0],[17,4,54,0,"enumerable"],[17,14,54,0],[18,4,54,0,"get"],[18,7,54,0],[18,18,54,0,"get"],[18,19,54,0],[19,6,54,0],[19,13,54,0,"useSocket"],[19,22,54,0],[20,4,54,0],[21,2,54,0],[22,2,60,2],[22,6,60,2,"_expoVirtualEnv"],[22,21,60,2],[22,24,60,2,"require"],[22,31,60,2],[22,32,60,2,"_dependencyMap"],[22,46,60,2],[23,2,1,0],[23,6,1,0,"_react"],[23,12,1,0],[23,15,1,0,"require"],[23,22,1,0],[23,23,1,0,"_dependencyMap"],[23,37,1,0],[24,2,2,0],[24,6,2,0,"_socketIoClient"],[24,21,2,0],[24,24,2,0,"require"],[24,31,2,0],[24,32,2,0,"_dependencyMap"],[24,46,2,0],[25,2,3,0],[25,6,3,0,"_AuthContext"],[25,18,3,0],[25,21,3,0,"require"],[25,28,3,0],[25,29,3,0,"_dependencyMap"],[25,43,3,0],[26,2,3,40],[26,6,3,40,"_reactJsxDevRuntime"],[26,25,3,40],[26,28,3,40,"require"],[26,35,3,40],[26,36,3,40,"_dependencyMap"],[26,50,3,40],[27,2,5,0],[27,8,5,6,"API_URL"],[27,15,5,13],[27,18,5,16,"_expoVirtualEnv"],[27,33,5,16],[27,34,5,16,"env"],[27,37,5,16],[27,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[27,61,5,16],[27,65,5,55],[27,67,5,57],[28,2,12,0],[28,8,12,6,"SocketContext"],[28,21,12,19],[28,37,12,22],[28,41,12,22,"createContext"],[28,47,12,35],[28,48,12,35,"createContext"],[28,61,12,35],[28,63,12,67,"undefined"],[28,72,12,76],[28,73,12,77],[29,2,14,7],[29,8,14,13,"SocketProvider"],[29,22,14,68],[29,25,14,71,"SocketProvider"],[29,26,14,72],[30,4,14,74,"children"],[31,2,14,83],[31,3,14,84],[31,8,14,89],[32,4,14,89,"_s"],[32,6,14,89],[33,4,15,2],[33,10,15,8],[33,11,15,9,"socket"],[33,17,15,15],[33,19,15,17,"setSocket"],[33,28,15,26],[33,29,15,27],[33,32,15,30],[33,36,15,30,"useState"],[33,42,15,38],[33,43,15,38,"useState"],[33,51,15,38],[33,53,15,54],[33,57,15,58],[33,58,15,59],[34,4,16,2],[34,10,16,8],[34,11,16,9,"connected"],[34,20,16,18],[34,22,16,20,"setConnected"],[34,34,16,32],[34,35,16,33],[34,38,16,36],[34,42,16,36,"useState"],[34,48,16,44],[34,49,16,44,"useState"],[34,57,16,44],[34,59,16,45],[34,64,16,50],[34,65,16,51],[35,4,17,2],[35,10,17,8],[36,6,17,10,"user"],[37,4,17,15],[37,5,17,16],[37,8,17,19],[37,12,17,19,"useAuth"],[37,24,17,26],[37,25,17,26,"useAuth"],[37,32,17,26],[37,34,17,27],[37,35,17,28],[38,4,19,2],[38,8,19,2,"useEffect"],[38,14,19,11],[38,15,19,11,"useEffect"],[38,24,19,11],[38,26,19,12],[38,32,19,18],[39,6,20,4],[39,10,20,8,"user"],[39,14,20,12],[39,16,20,14],[40,8,21,6],[40,14,21,12,"newSocket"],[40,23,21,21],[40,26,21,24],[40,30,21,24,"io"],[40,45,21,26],[40,46,21,26,"io"],[40,48,21,26],[40,50,21,27,"API_URL"],[40,57,21,34],[40,59,21,36],[41,10,22,8,"transports"],[41,20,22,18],[41,22,22,20],[41,23,22,21],[41,34,22,32],[41,36,22,34],[41,45,22,43],[41,46,22,44],[42,10,23,8,"reconnection"],[42,22,23,20],[42,24,23,22],[42,28,23,26],[43,10,24,8,"reconnectionAttempts"],[43,30,24,28],[43,32,24,30],[43,33,24,31],[44,10,25,8,"reconnectionDelay"],[44,27,25,25],[44,29,25,27],[45,8,26,6],[45,9,26,7],[45,10,26,8],[46,8,28,6,"newSocket"],[46,17,28,15],[46,18,28,16,"on"],[46,20,28,18],[46,21,28,19],[46,30,28,28],[46,32,28,30],[46,38,28,36],[47,10,29,8,"console"],[47,17,29,15],[47,18,29,16,"log"],[47,21,29,19],[47,22,29,20],[47,40,29,38],[47,41,29,39],[48,10,30,8,"setConnected"],[48,22,30,20],[48,23,30,21],[48,27,30,25],[48,28,30,26],[49,10,31,8,"newSocket"],[49,19,31,17],[49,20,31,18,"emit"],[49,24,31,22],[49,25,31,23],[49,36,31,34],[49,38,31,36],[50,12,31,38,"user_id"],[50,19,31,45],[50,21,31,47,"user"],[50,25,31,51],[50,26,31,52,"user_id"],[51,10,31,60],[51,11,31,61],[51,12,31,62],[52,8,32,6],[52,9,32,7],[52,10,32,8],[53,8,34,6,"newSocket"],[53,17,34,15],[53,18,34,16,"on"],[53,20,34,18],[53,21,34,19],[53,33,34,31],[53,35,34,33],[53,41,34,39],[54,10,35,8,"console"],[54,17,35,15],[54,18,35,16,"log"],[54,21,35,19],[54,22,35,20],[54,43,35,41],[54,44,35,42],[55,10,36,8,"setConnected"],[55,22,36,20],[55,23,36,21],[55,28,36,26],[55,29,36,27],[56,8,37,6],[56,9,37,7],[56,10,37,8],[57,8,39,6,"setSocket"],[57,17,39,15],[57,18,39,16,"newSocket"],[57,27,39,25],[57,28,39,26],[58,8,41,6],[58,15,41,13],[58,21,41,19],[59,10,42,8,"newSocket"],[59,19,42,17],[59,20,42,18,"close"],[59,25,42,23],[59,26,42,24],[59,27,42,25],[60,8,43,6],[60,9,43,7],[61,6,44,4],[62,4,45,2],[62,5,45,3],[62,7,45,5],[62,8,45,6,"user"],[62,12,45,10],[62,13,45,11],[62,14,45,12],[63,4,47,2],[63,24,48,4],[63,28,48,4,"_reactJsxDevRuntime"],[63,47,48,4],[63,48,48,4,"jsxDEV"],[63,54,48,4],[63,56,48,5,"SocketContext"],[63,69,48,18],[63,70,48,19,"Provider"],[63,78,48,27],[64,6,48,28,"value"],[64,11,48,33],[64,13,48,35],[65,8,48,37,"socket"],[65,14,48,43],[66,8,48,45,"connected"],[67,6,48,55],[67,7,48,57],[68,6,48,57,"children"],[68,14,48,57],[68,16,49,7,"children"],[69,4,49,15],[70,6,49,15,"fileName"],[70,14,49,15],[70,16,49,15,"_jsxFileName"],[70,28,49,15],[71,6,49,15,"lineNumber"],[71,16,49,15],[72,6,49,15,"columnNumber"],[72,18,49,15],[73,4,49,15],[73,11,50,28],[73,12,50,29],[74,2,52,0],[74,3,52,1],[75,2,52,2,"_s"],[75,4,52,2],[75,5,14,13,"SocketProvider"],[75,19,14,68],[76,4,14,68],[76,12,17,19,"useAuth"],[76,24,17,26],[76,25,17,26,"useAuth"],[76,32,17,26],[77,2,17,26],[78,2,17,26,"_c"],[78,4,17,26],[78,7,14,13,"SocketProvider"],[78,21,14,68],[79,2,54,7],[79,8,54,13,"useSocket"],[79,17,54,22],[79,20,54,25,"useSocket"],[79,21,54,25],[79,26,54,31],[80,4,54,31,"_s2"],[80,7,54,31],[81,4,55,2],[81,10,55,8,"context"],[81,17,55,15],[81,20,55,18],[81,24,55,18,"useContext"],[81,30,55,28],[81,31,55,28,"useContext"],[81,41,55,28],[81,43,55,29,"SocketContext"],[81,56,55,42],[81,57,55,43],[82,4,56,2],[82,8,56,6],[82,9,56,7,"context"],[82,16,56,14],[82,18,56,16],[83,6,57,4],[83,12,57,10],[83,16,57,14,"Error"],[83,21,57,19],[83,22,57,20],[83,68,57,66],[83,69,57,67],[84,4,58,2],[85,4,59,2],[85,11,59,9,"context"],[85,18,59,16],[86,2,60,0],[86,3,60,1],[87,2,60,2,"_s2"],[87,5,60,2],[87,6,54,13,"useSocket"],[87,15,54,22],[88,2,54,22],[88,6,54,22,"_c"],[88,8,54,22],[89,2,54,22,"$RefreshReg$"],[89,14,54,22],[89,15,54,22,"_c"],[89,17,54,22],[90,0,54,22],[90,3]],"functionMap":{"names":["<global>","SocketProvider","useEffect$argument_0","newSocket.on$argument_1","<anonymous>","useSocket"],"mappings":"AAA;uECa;YCK;8BCS;ODI;iCCE;ODG;aEI;OFE;GDE;CDO;yBKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}