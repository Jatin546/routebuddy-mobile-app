{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":46,"index":125}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"./AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":126},"end":{"line":3,"column":40,"index":166}}],"key":"YmpzODa+dVz64UAAYTI+RwJeEt0=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/SocketContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"SocketProvider\", {\n    enumerable: true,\n    get: function () {\n      return SocketProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useSocket\", {\n    enumerable: true,\n    get: function () {\n      return useSocket;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _socketIoClient = require(_dependencyMap[1], \"socket.io-client\");\n  var _AuthContext = require(_dependencyMap[2], \"./AuthContext\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  const SocketContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const SocketProvider = ({\n    children\n  }) => {\n    const [socket, setSocket] = (0, _react.useState)(null);\n    const [connected, setConnected] = (0, _react.useState)(false);\n    const {\n      user\n    } = (0, _AuthContext.useAuth)();\n    (0, _react.useEffect)(() => {\n      if (user) {\n        const newSocket = (0, _socketIoClient.io)(API_URL, {\n          transports: ['websocket', 'polling'],\n          reconnection: true,\n          reconnectionAttempts: 5,\n          reconnectionDelay: 1000\n        });\n        newSocket.on('connect', () => {\n          console.log('Socket connected');\n          setConnected(true);\n          newSocket.emit('join_room', {\n            user_id: user.user_id\n          });\n        });\n        newSocket.on('disconnect', () => {\n          console.log('Socket disconnected');\n          setConnected(false);\n        });\n        setSocket(newSocket);\n        return () => {\n          newSocket.close();\n        };\n      }\n    }, [user]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(SocketContext.Provider, {\n      value: {\n        socket,\n        connected\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }, this);\n  };\n  const useSocket = () => {\n    const context = (0, _react.useContext)(SocketContext);\n    if (!context) {\n      throw new Error('useSocket must be used within SocketProvider');\n    }\n    return context;\n  };\n});","lineCount":78,"map":[[8,2,14,0,"Object"],[8,8,14,0],[8,9,14,0,"defineProperty"],[8,23,14,0],[8,24,14,0,"exports"],[8,31,14,0],[9,4,14,0,"enumerable"],[9,14,14,0],[10,4,14,0,"get"],[10,7,14,0],[10,18,14,0,"get"],[10,19,14,0],[11,6,14,0],[11,13,14,0,"SocketProvider"],[11,27,14,0],[12,4,14,0],[13,2,14,0],[14,2,54,0,"Object"],[14,8,54,0],[14,9,54,0,"defineProperty"],[14,23,54,0],[14,24,54,0,"exports"],[14,31,54,0],[15,4,54,0,"enumerable"],[15,14,54,0],[16,4,54,0,"get"],[16,7,54,0],[16,18,54,0,"get"],[16,19,54,0],[17,6,54,0],[17,13,54,0,"useSocket"],[17,22,54,0],[18,4,54,0],[19,2,54,0],[20,2,1,0],[20,6,1,0,"_react"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,2,0],[21,6,2,0,"_socketIoClient"],[21,21,2,0],[21,24,2,0,"require"],[21,31,2,0],[21,32,2,0,"_dependencyMap"],[21,46,2,0],[22,2,3,0],[22,6,3,0,"_AuthContext"],[22,18,3,0],[22,21,3,0,"require"],[22,28,3,0],[22,29,3,0,"_dependencyMap"],[22,43,3,0],[23,2,3,40],[23,6,3,40,"_reactJsxDevRuntime"],[23,25,3,40],[23,28,3,40,"require"],[23,35,3,40],[23,36,3,40,"_dependencyMap"],[23,50,3,40],[24,2,5,0],[24,8,5,6,"API_URL"],[24,15,5,13],[24,18,5,16,"process"],[24,25,5,23],[24,26,5,24,"env"],[24,29,5,27],[24,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[24,53,5,51],[24,57,5,55],[24,59,5,57],[25,2,12,0],[25,8,12,6,"SocketContext"],[25,21,12,19],[25,37,12,22],[25,41,12,22,"createContext"],[25,47,12,35],[25,48,12,35,"createContext"],[25,61,12,35],[25,63,12,67,"undefined"],[25,72,12,76],[25,73,12,77],[26,2,14,7],[26,8,14,13,"SocketProvider"],[26,22,14,68],[26,25,14,71,"SocketProvider"],[26,26,14,72],[27,4,14,74,"children"],[28,2,14,83],[28,3,14,84],[28,8,14,89],[29,4,15,2],[29,10,15,8],[29,11,15,9,"socket"],[29,17,15,15],[29,19,15,17,"setSocket"],[29,28,15,26],[29,29,15,27],[29,32,15,30],[29,36,15,30,"useState"],[29,42,15,38],[29,43,15,38,"useState"],[29,51,15,38],[29,53,15,54],[29,57,15,58],[29,58,15,59],[30,4,16,2],[30,10,16,8],[30,11,16,9,"connected"],[30,20,16,18],[30,22,16,20,"setConnected"],[30,34,16,32],[30,35,16,33],[30,38,16,36],[30,42,16,36,"useState"],[30,48,16,44],[30,49,16,44,"useState"],[30,57,16,44],[30,59,16,45],[30,64,16,50],[30,65,16,51],[31,4,17,2],[31,10,17,8],[32,6,17,10,"user"],[33,4,17,15],[33,5,17,16],[33,8,17,19],[33,12,17,19,"useAuth"],[33,24,17,26],[33,25,17,26,"useAuth"],[33,32,17,26],[33,34,17,27],[33,35,17,28],[34,4,19,2],[34,8,19,2,"useEffect"],[34,14,19,11],[34,15,19,11,"useEffect"],[34,24,19,11],[34,26,19,12],[34,32,19,18],[35,6,20,4],[35,10,20,8,"user"],[35,14,20,12],[35,16,20,14],[36,8,21,6],[36,14,21,12,"newSocket"],[36,23,21,21],[36,26,21,24],[36,30,21,24,"io"],[36,45,21,26],[36,46,21,26,"io"],[36,48,21,26],[36,50,21,27,"API_URL"],[36,57,21,34],[36,59,21,36],[37,10,22,8,"transports"],[37,20,22,18],[37,22,22,20],[37,23,22,21],[37,34,22,32],[37,36,22,34],[37,45,22,43],[37,46,22,44],[38,10,23,8,"reconnection"],[38,22,23,20],[38,24,23,22],[38,28,23,26],[39,10,24,8,"reconnectionAttempts"],[39,30,24,28],[39,32,24,30],[39,33,24,31],[40,10,25,8,"reconnectionDelay"],[40,27,25,25],[40,29,25,27],[41,8,26,6],[41,9,26,7],[41,10,26,8],[42,8,28,6,"newSocket"],[42,17,28,15],[42,18,28,16,"on"],[42,20,28,18],[42,21,28,19],[42,30,28,28],[42,32,28,30],[42,38,28,36],[43,10,29,8,"console"],[43,17,29,15],[43,18,29,16,"log"],[43,21,29,19],[43,22,29,20],[43,40,29,38],[43,41,29,39],[44,10,30,8,"setConnected"],[44,22,30,20],[44,23,30,21],[44,27,30,25],[44,28,30,26],[45,10,31,8,"newSocket"],[45,19,31,17],[45,20,31,18,"emit"],[45,24,31,22],[45,25,31,23],[45,36,31,34],[45,38,31,36],[46,12,31,38,"user_id"],[46,19,31,45],[46,21,31,47,"user"],[46,25,31,51],[46,26,31,52,"user_id"],[47,10,31,60],[47,11,31,61],[47,12,31,62],[48,8,32,6],[48,9,32,7],[48,10,32,8],[49,8,34,6,"newSocket"],[49,17,34,15],[49,18,34,16,"on"],[49,20,34,18],[49,21,34,19],[49,33,34,31],[49,35,34,33],[49,41,34,39],[50,10,35,8,"console"],[50,17,35,15],[50,18,35,16,"log"],[50,21,35,19],[50,22,35,20],[50,43,35,41],[50,44,35,42],[51,10,36,8,"setConnected"],[51,22,36,20],[51,23,36,21],[51,28,36,26],[51,29,36,27],[52,8,37,6],[52,9,37,7],[52,10,37,8],[53,8,39,6,"setSocket"],[53,17,39,15],[53,18,39,16,"newSocket"],[53,27,39,25],[53,28,39,26],[54,8,41,6],[54,15,41,13],[54,21,41,19],[55,10,42,8,"newSocket"],[55,19,42,17],[55,20,42,18,"close"],[55,25,42,23],[55,26,42,24],[55,27,42,25],[56,8,43,6],[56,9,43,7],[57,6,44,4],[58,4,45,2],[58,5,45,3],[58,7,45,5],[58,8,45,6,"user"],[58,12,45,10],[58,13,45,11],[58,14,45,12],[59,4,47,2],[59,24,48,4],[59,28,48,4,"_reactJsxDevRuntime"],[59,47,48,4],[59,48,48,4,"jsxDEV"],[59,54,48,4],[59,56,48,5,"SocketContext"],[59,69,48,18],[59,70,48,19,"Provider"],[59,78,48,27],[60,6,48,28,"value"],[60,11,48,33],[60,13,48,35],[61,8,48,37,"socket"],[61,14,48,43],[62,8,48,45,"connected"],[63,6,48,55],[63,7,48,57],[64,6,48,57,"children"],[64,14,48,57],[64,16,49,7,"children"],[65,4,49,15],[66,6,49,15,"fileName"],[66,14,49,15],[66,16,49,15,"_jsxFileName"],[66,28,49,15],[67,6,49,15,"lineNumber"],[67,16,49,15],[68,6,49,15,"columnNumber"],[68,18,49,15],[69,4,49,15],[69,11,50,28],[69,12,50,29],[70,2,52,0],[70,3,52,1],[71,2,54,7],[71,8,54,13,"useSocket"],[71,17,54,22],[71,20,54,25,"useSocket"],[71,21,54,25],[71,26,54,31],[72,4,55,2],[72,10,55,8,"context"],[72,17,55,15],[72,20,55,18],[72,24,55,18,"useContext"],[72,30,55,28],[72,31,55,28,"useContext"],[72,41,55,28],[72,43,55,29,"SocketContext"],[72,56,55,42],[72,57,55,43],[73,4,56,2],[73,8,56,6],[73,9,56,7,"context"],[73,16,56,14],[73,18,56,16],[74,6,57,4],[74,12,57,10],[74,16,57,14,"Error"],[74,21,57,19],[74,22,57,20],[74,68,57,66],[74,69,57,67],[75,4,58,2],[76,4,59,2],[76,11,59,9,"context"],[76,18,59,16],[77,2,60,0],[77,3,60,1],[78,0,60,2],[78,3]],"functionMap":{"names":["<global>","SocketProvider","useEffect$argument_0","newSocket.on$argument_1","<anonymous>","useSocket"],"mappings":"AAA;uECa;YCK;8BCS;ODI;iCCE;ODG;aEI;OFE;GDE;CDO;yBKE;CLM"},"hasCjsExports":false},"type":"js/module"}]}